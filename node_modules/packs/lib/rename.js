"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = require("path");
const bluebird_1 = require("bluebird");
const fs = bluebird_1.promisifyAll(require("fs"));
const inquirer = require("inquirer");
const fs_1 = require("fs");
function leftpad(zeroes, num) {
    return (String(zeroes) + String(num)).substring(String(num).length);
}
const moduleFiles = fs_1.readdirSync(path_1.join(process.cwd(), "modules"));
const sortedFiles = moduleFiles
    .sort()
    .filter(filename => filename.includes(".json"));
const digits = Math.ceil(Math.log10(sortedFiles.length));
const zeroes = new Array(digits).fill("0").join("");
console.log("New file names:");
const moduleStrings = sortedFiles.map((filename, i) => {
    console.log(`${i}: ${filename} -> ${leftpad(zeroes, i)}.json`);
    return fs.readFileSync(path_1.join(process.cwd(), "modules", filename), "utf8");
});
inquirer
    .prompt([
    {
        type: "confirm",
        name: "confirmed",
        message: "Confirm new file names:",
        default: false
    }
])
    .then((answer) => {
    if (answer.confirmed) {
        sortedFiles.map(filename => fs.unlinkSync(path_1.join(process.cwd(), "modules", filename)));
        moduleStrings.map((s, i) => {
            return fs.writeFileSync(path_1.join(process.cwd(), "modules", `${leftpad(zeroes, i)}.json`), s, "utf8");
        });
    }
});
//# sourceMappingURL=rename.js.map